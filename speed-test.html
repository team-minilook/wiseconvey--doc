<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Gemini Model Speed Test</title>
    <style>
        body {
            font-family: -apple-system, sans-serif;
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
        }
        h1 { color: #333; }
        .test-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .model-test {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background: #f9f9f9;
        }
        .model-name {
            font-weight: bold;
            color: #0066FF;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            background: #0066FF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0052cc; }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            min-height: 50px;
        }
        .time {
            color: #22c55e;
            font-weight: bold;
        }
        .error { color: #ef4444; }
        .comparison {
            margin-top: 20px;
            padding: 20px;
            background: #e6f7ff;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ Gemini ëª¨ë¸ ì†ë„ í…ŒìŠ¤íŠ¸</h1>
    
    <button onclick="testAllModels()">ëª¨ë“  ëª¨ë¸ í…ŒìŠ¤íŠ¸</button>
    <button onclick="clearResults()">ê²°ê³¼ ì´ˆê¸°í™”</button>
    
    <div class="test-container">
        <div class="model-test">
            <div class="model-name">gemini-1.5-flash-8b-latest (ìµœì‹  ì´ˆê²½ëŸ‰)</div>
            <button onclick="testModel('gemini-1.5-flash-8b-latest', 'result1')">í…ŒìŠ¤íŠ¸</button>
            <div id="result1" class="result">ëŒ€ê¸° ì¤‘...</div>
        </div>
        
        <div class="model-test">
            <div class="model-name">gemini-1.5-flash (í‘œì¤€)</div>
            <button onclick="testModel('gemini-1.5-flash', 'result2')">í…ŒìŠ¤íŠ¸</button>
            <div id="result2" class="result">ëŒ€ê¸° ì¤‘...</div>
        </div>
        
        <div class="model-test">
            <div class="model-name">gemini-1.5-flash-latest (ìµœì‹ )</div>
            <button onclick="testModel('gemini-1.5-flash-latest', 'result3')">í…ŒìŠ¤íŠ¸</button>
            <div id="result3" class="result">ëŒ€ê¸° ì¤‘...</div>
        </div>
        
        <div class="model-test">
            <div class="model-name">gemini-1.5-pro (ê³ ì„±ëŠ¥)</div>
            <button onclick="testModel('gemini-1.5-pro', 'result4')">í…ŒìŠ¤íŠ¸</button>
            <div id="result4" class="result">ëŒ€ê¸° ì¤‘...</div>
        </div>
    </div>
    
    <div class="comparison" id="comparison">
        <h3>ğŸ“Š ì†ë„ ë¹„êµ ê²°ê³¼</h3>
        <div id="comparisonResults">í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
    </div>

    <script>
        const API_KEY = 'AIzaSyCI1spB1J-3E5lkwmEUzG8v5C37duj0HVg';
        const API_BASE = 'https://generativelanguage.googleapis.com/v1beta';
        const TEST_PROMPT = 'ì•ˆë…•í•˜ì„¸ìš”. ê°„ë‹¨íˆ ìê¸°ì†Œê°œ í•´ì£¼ì„¸ìš”.';
        
        const results = {};
        
        async function testModel(model, resultId) {
            const resultDiv = document.getElementById(resultId);
            resultDiv.innerHTML = 'í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            const startTime = performance.now();
            
            try {
                const response = await fetch(`${API_BASE}/models/${model}:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: TEST_PROMPT
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.3,
                            maxOutputTokens: 256,
                        }
                    })
                });
                
                const data = await response.json();
                const endTime = performance.now();
                const responseTime = ((endTime - startTime) / 1000).toFixed(2);
                
                if (response.ok && data.candidates) {
                    const text = data.candidates[0].content.parts[0].text;
                    resultDiv.innerHTML = `
                        <div class="time">â±ï¸ ${responseTime}ì´ˆ</div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            ${text.substring(0, 100)}...
                        </div>
                    `;
                    
                    results[model] = parseFloat(responseTime);
                    updateComparison();
                } else {
                    resultDiv.innerHTML = `<div class="error">âŒ ì˜¤ë¥˜: ${data.error?.message}</div>`;
                }
            } catch (error) {
                const endTime = performance.now();
                const responseTime = ((endTime - startTime) / 1000).toFixed(2);
                resultDiv.innerHTML = `<div class="error">âŒ ${error.message} (${responseTime}ì´ˆ)</div>`;
            }
        }
        
        async function testAllModels() {
            const models = [
                'gemini-1.5-flash-8b-latest',
                'gemini-1.5-flash',
                'gemini-1.5-flash-latest',
                'gemini-1.5-pro'
            ];
            
            for (let i = 0; i < models.length; i++) {
                await testModel(models[i], `result${i + 1}`);
                await new Promise(resolve => setTimeout(resolve, 500)); // Delay between tests
            }
        }
        
        function updateComparison() {
            if (Object.keys(results).length === 0) return;
            
            const sorted = Object.entries(results).sort((a, b) => a[1] - b[1]);
            let html = '<table style="width: 100%; border-collapse: collapse;">';
            html += '<tr><th style="text-align: left; padding: 8px; border-bottom: 2px solid #ddd;">ìˆœìœ„</th>';
            html += '<th style="text-align: left; padding: 8px; border-bottom: 2px solid #ddd;">ëª¨ë¸</th>';
            html += '<th style="text-align: left; padding: 8px; border-bottom: 2px solid #ddd;">ì‘ë‹µ ì‹œê°„</th>';
            html += '<th style="text-align: left; padding: 8px; border-bottom: 2px solid #ddd;">ìƒëŒ€ ì†ë„</th></tr>';
            
            const fastest = sorted[0][1];
            
            sorted.forEach((item, index) => {
                const [model, time] = item;
                const relative = ((time / fastest) * 100).toFixed(0);
                const emoji = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'ğŸ…';
                
                html += `<tr>`;
                html += `<td style="padding: 8px; border-bottom: 1px solid #eee;">${emoji} ${index + 1}ìœ„</td>`;
                html += `<td style="padding: 8px; border-bottom: 1px solid #eee;">${model}</td>`;
                html += `<td style="padding: 8px; border-bottom: 1px solid #eee;">${time}ì´ˆ</td>`;
                html += `<td style="padding: 8px; border-bottom: 1px solid #eee;">${relative}%</td>`;
                html += `</tr>`;
            });
            
            html += '</table>';
            
            document.getElementById('comparisonResults').innerHTML = html;
        }
        
        function clearResults() {
            document.querySelectorAll('.result').forEach(div => {
                div.innerHTML = 'ëŒ€ê¸° ì¤‘...';
            });
            results = {};
            document.getElementById('comparisonResults').innerHTML = 'í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.';
        }
    </script>
</body>
</html>