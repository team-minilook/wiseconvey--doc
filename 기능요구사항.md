# Weraser 기능 요구사항 명세서

**제품 비전 및 사용자 스토리**: [PRD.md](./PRD.md) 참조  
**실행 계획 및 마일스톤**: [PLAN.md](./PLAN.md) 참조

## 1. 기술적 개요
본 문서는 Weraser AI 지식 관리 플랫폼의 기술적 상세 명세서입니다. 비즈니스 요구사항과 제품 로드맵은 PRD.md를 참조하세요.

## 2. Phase 1: 핵심 기능 (MVP)

### 2.1 문서 관리 시스템

#### 2.1.1 문서 업로드 및 저장
- **통합 문서 추가 인터페이스**
  - 단일 "➕ 문서 추가" 버튼으로 통합
  - 드롭다운 메뉴를 통한 기능 구분:
    - 📁 조직 문서 불러오기
    - 📤 개인 문서 업로드
- **지원 형식**: PDF, Word, Excel, PPT, 이미지(PNG, JPG), 텍스트 파일
- **소스 한도 정책**: 
  - **개별 파일 제한**: 최대 50MB
  - **프로젝트 총 용량**: 500MB (프로그레스 바로 시각화)
  - **사용자별 할당량**: 개인 문서 1GB, 조직 문서 공유
  - **파일 개수 제한**: 프로젝트당 최대 1,000개 문서
  - **동시 업로드**: 최대 10개 파일
  - **일일 업로드 한도**: 사용자당 100MB/일
  - **한도 초과 시 처리**:
    - 경고 메시지 표시 (80%, 95% 도달 시)
    - 업로드 차단 (100% 도달 시)
    - 기존 문서 삭제 후 재업로드 권장
    - 용량 정리 도구 제공
- **저장 구조**: 
  - 조직 문서: 공유 저장소 (디렉토리 경로 유지)
  - 개인 문서: 개인 저장소 (사용자 정의 디렉토리 구조)

#### 2.1.2 문서 분류 체계
- **조직 문서**
  - 전사 공유 문서
  - 부서별 문서
  - 프로젝트별 문서
  - 디렉토리 경로 참조 및 표시
  - 자동 동기화: 원본 경로의 문서 변경 시 자동 인덱싱
  - 메타정보:
    - 파일 디렉토리 경로 (예: /조직문서/계약서/2024/)
    - 업데이트 일시
    - 업데이트 담당자명
    - 문서 유형 (PDF, Word, Excel 등)
  
- **개인 문서**
  - 사용자별 개인 작업 문서
  - 임시 저장 문서
  - **디렉토리 분류 업로드 지원**:
    - 기존 디렉토리 선택 또는 새 디렉토리 생성
    - 프로젝트별, 카테고리별 체계적 분류
    - 디렉토리별 권한 관리 (개인/공유)
  - 메타정보:
    - 업로드 일시
    - 사용자 정의 디렉토리 경로
    - 문서 유형
    - 디렉토리 분류

#### 2.1.2.1 조직 문서 불러오기 워크플로우
- **디렉토리 탐색 모달**
  - 조직 공유 저장소의 디렉토리 트리 표시
  - 폴더별 확장/축소 네비게이션
  - 문서 미리보기 및 메타정보 표시
- **다중 문서 선택**
  - 체크박스를 통한 다중 선택
  - 폴더 전체 선택 옵션
  - 선택된 문서 수 및 총 용량 실시간 표시
- **불러오기 실행**
  - 원본 디렉토리 경로 유지
  - 자동 동기화 연결 설정
  - 중복 문서 처리 옵션

#### 2.1.2.2 개인 문서 업로드 워크플로우
- **디렉토리 선택 단계**
  - 기존 디렉토리 목록 표시
  - 새 디렉토리 생성 옵션
  - 디렉토리별 문서 수 및 용량 표시
- **파일 업로드**
  - 드래그앤드롭 지원
  - 다중 파일 선택 (최대 10개)
  - **업로드 전 검증**:
    - 파일 형식 확인
    - 개별 파일 크기 검증 (50MB 이하)
    - 총 용량 한도 확인
    - 파일명 중복 검사
    - 일일 업로드 한도 확인
  - **업로드 진행 상황 표시**:
    - 개별 파일 진행률
    - 전체 업로드 진행률
    - 예상 완료 시간
    - 업로드 속도
  - **오류 처리**:
    - 네트워크 오류 시 재시도
    - 용량 초과 시 대안 제시
    - 실패한 파일 목록 표시
- **메타데이터 입력**
  - 자동 추출된 메타데이터 확인
  - 사용자 정의 태그 추가
  - 접근 권한 설정 (개인/프로젝트 공유)

#### 2.1.3 문서 인덱싱
- 실시간 벡터 임베딩 생성
- 메타데이터 추출 (제목, 작성자, 날짜, 태그)
- 자동 동기화: 조직 문서 수정 시 자동 재인덱싱

### 2.2 AI 채팅 인터페이스

#### 2.2.1 기본 채팅 기능
- 자연어 질의응답
- 컨텍스트 기반 대화 유지
- 멀티턴 대화 지원

#### 2.2.2 채팅 편의 기능
- **로딩 표시**
  - 응답 생성 중 애니메이션 스피너
  - 응답 중지 버튼 제공
  
- **메시지 편집**
  - 사용자 메시지 수정 기능
  - 수정 시 AI 응답 자동 재생성
  - 편집 히스토리 관리
  
- **응답 제어**
  - 응답 중지/재개 기능
  - 응답 재생성 옵션
  - 응답 속도 조절 (스트리밍)

#### 2.2.3 문서 참조 기능
- 응답에 출처 문서 표시
- 참조 문서 하이라이트
- 문서 원본 링크 제공

### 2.3 프로젝트 관리

#### 2.3.1 프로젝트 생성 및 관리
- 프로젝트별 문서 그룹핑
- 프로젝트 설정 (이름, 설명, 태그)
- 프로젝트 멤버 관리

#### 2.3.2 용량 관리
- **프로젝트 용량 표시**
  - 사용량/전체 용량 프로그레스 바
  - 파일별 용량 상세 보기
  - 용량 경고 알림 (80%, 90%, 100%)
  
- **용량 최적화**
  - 중복 문서 감지
  - 압축 옵션 제공
  - 오래된 문서 아카이빙

### 2.4 문서 아티팩트 뷰

#### 2.4.1 플로팅 문서 뷰어
- 채팅 우측 플로팅 패널
- 문서 상세 내용 표시 (실제 문서 파일 내용)
- 메타정보 표시:
  - 파일 경로
  - 업로드/업데이트 일시
  - 문서 유형
  - 업데이트 담당자명 (조직 문서만)
- 키워드 하이라이트
- 섹션별 네비게이션

#### 2.4.2 문서 상호작용
- 특정 섹션 선택 → 채팅 질문 자동 생성
- 문서 내 검색
- 북마크 기능

## 3. Phase 2: 고급 기능

### 3.1 멀티에이전트 시스템
- 전문 분야별 AI 에이전트
- 에이전트 간 협업
- 작업 자동 분배

### 3.2 워크플로우 자동화
- 반복 작업 템플릿
- 조건부 작업 실행
- 스케줄링 기능

### 3.3 분석 및 인사이트
- 문서 사용 통계
- 질문 패턴 분석
- 지식 갭 식별

## 4. Phase 3: 엔터프라이즈 기능

### 4.1 보안 및 권한
- 역할 기반 접근 제어 (RBAC)
- 문서 암호화
- 감사 로그

### 4.2 통합 기능
- 외부 시스템 연동 (Slack, Teams, Jira)
- API 제공
- 웹훅 지원

### 4.3 커스터마이제이션
- 기업별 맞춤 UI
- 커스텀 AI 모델 학습
- 전용 배포 옵션

## 5. 기술 요구사항

### 5.1 성능 요구사항
- 응답 시간: 3초 이내
- 동시 사용자: 100명 이상
- 가용성: 99.9%

### 5.2 AI API 통합
- **현재 상태**: CORS 제한으로 브라우저 직접 호출 불가
- **해결 방안**:
  - 개발/데모: Mock API 사용
  - 프로덕션: 서버 프록시 구축 (Vercel/Netlify Functions)
  - 지원 모델: Gemini, Claude, GPT-4

### 5.3 브라우저 지원
- Chrome 90+
- Safari 14+
- Edge 90+
- Firefox 88+

## 6. UI/UX 요구사항

### 6.1 레이아웃
- 좌측: 문서 관리 사이드바 (LNB)
- 중앙: 채팅 인터페이스
- 우측: 문서 아티팩트 뷰 (플로팅)

### 6.2 반응형 디자인
- 데스크톱: 전체 레이아웃
- 태블릿: 사이드바 토글
- 모바일: 단일 컬럼 뷰

### 6.3 접근성
- WCAG 2.1 Level AA 준수
- 키보드 네비게이션
- 스크린 리더 지원

## 7. 데이터 관리

### 7.1 데이터 저장
- 문서: 클라우드 스토리지 (S3/GCS)
  - 조직 문서: 디렉토리 구조 유지
  - 개인 문서: 사용자별 디렉토리
- 벡터 DB: Pinecone/Weaviate
- 메타데이터: PostgreSQL
  - 문서 경로
  - 업로드/업데이트 일시
  - 담당자 정보
  - 문서 유형
  - 버전 히스토리

### 7.2 백업 및 복구
- 일일 자동 백업
- 포인트 인 타임 복구
- 재해 복구 계획

## 8. 모니터링 및 분석

### 8.1 시스템 모니터링
- 실시간 성능 모니터링
- 에러 추적
- 사용량 분석

### 8.2 사용자 분석
- 사용 패턴 분석
- 만족도 측정
- 개선 제안 수집

## 9. 개발 우선순위

**참조**: [PRD.md](./PRD.md)의 제품 요구사항 및 우선순위

### Phase 1 (3개월)
1. ✅ 기본 문서 업로드/관리
2. ✅ AI 채팅 인터페이스  
3. ✅ 용량 관리 및 프로그레스 표시
4. ✅ 채팅 편의 기능 (로딩/중지/편집)
5. 🔄 문서 아티팩트 뷰
6. 🔄 조직 문서 경로 관리
7. 🔄 문서 자동 동기화

### Phase 2 (3개월)
- 멀티에이전트 시스템
- 워크플로우 자동화
- 고급 분석 기능

### Phase 3 (6개월)
- 엔터프라이즈 보안
- 외부 시스템 통합
- 커스터마이제이션

## 10. 성공 지표

### 10.1 기술 지표
- 평균 응답 시간 < 3초
- 시스템 가용성 > 99.9%
- 문서 인덱싱 정확도 > 95%

### 10.2 비즈니스 지표
- 월간 활성 사용자 (MAU) 증가율
- 평균 세션 시간
- 문서 재사용률
- 지식 검색 성공률

## 11. 리스크 및 완화 방안

### 11.1 기술 리스크
- **CORS 제한**: 서버 프록시 구축으로 해결
- **대용량 문서 처리**: 청킹 및 스트리밍 처리
- **응답 지연**: 캐싱 및 최적화

### 11.2 보안 리스크
- **API 키 노출**: 서버 사이드 처리
- **데이터 유출**: 암호화 및 접근 제어
- **인증 취약점**: OAuth 2.0/SAML 구현

---

*최종 업데이트: 2025년 9월 1일*
*버전: 1.1.0*